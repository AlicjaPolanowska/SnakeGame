<h1>Play</h1>

<form name = 'my_form' value='d' action = "{% url 'snakegame:game' %}"  method="post">
  {% csrf_token %}
  <table>
  {% for row in board %}
    <tr>{% for tup in row %}
      {% load snake_tags %}
      <td>{{board|index:forloop.parentloop.counter0|index:forloop.counter0}}</td>
    {% endfor %}
    </tr>
  {% endfor %}

  </table>
  <input type='hidden' name = 'move_key' id = 'move_key'/>
</form>
<script type="text/javascript">
  var interval = window.setInterval(function(){
    document.forms['my_form'].submit();
  }, 1000);

  document.onkeypress = function(e) {
    if(window.event){
      document.getElementById('move_key').value = String.fromCharCode(e.keyCode);
    } else if(e.which){
      document.getElementById('move_key').value = String.fromCharCode(e.which);
    }
  };

</script>
